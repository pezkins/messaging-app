# Intok Messaging App - Global Cursor Rules

## Project Overview

Intok is a multilingual mobile messaging app that automatically translates messages into the user's preferred language. This project uses a multi-agent development approach with specialized AI agents for different aspects of development.

## Active Project Structure

```
messaging-app/
‚îú‚îÄ‚îÄ ios-native/          # iOS app (Swift/SwiftUI) - ACTIVE
‚îú‚îÄ‚îÄ android-native/      # Android app (Kotlin/Compose) - ACTIVE
‚îú‚îÄ‚îÄ server-serverless/   # AWS Lambda backend - ACTIVE
‚îú‚îÄ‚îÄ .github/workflows/   # CI/CD pipelines - ACTIVE
‚îú‚îÄ‚îÄ docs/                # Public documentation - ACTIVE
‚îú‚îÄ‚îÄ team/                # Shared team documentation - ACTIVE
‚îî‚îÄ‚îÄ .cursor/             # AI agent configurations
```

## ‚ö†Ô∏è DEPRECATED FOLDERS - DO NOT MODIFY

The following folders are deprecated and should NEVER be modified:
- `server/` - Legacy Express server (replaced by server-serverless)
- `shared/` - Legacy shared types
- `mobile/` - Legacy React Native/Expo app (replaced by native apps)
- `infrastructure/` - Legacy infrastructure code

## AI Agent Team

This project uses 5 specialized AI agents:

1. **üçé iOS Developer** (`@ios-developer`)
   - Expert in Swift, SwiftUI, iOS SDK
   - Working directory: `ios-native/`
   - 20+ years mobile messaging experience

2. **ü§ñ Android Developer** (`@android-developer`)
   - Expert in Kotlin, Jetpack Compose, Android SDK
   - Working directory: `android-native/`
   - 20+ years mobile messaging experience

3. **‚òÅÔ∏è Backend Developer** (`@backend-developer`)
   - Expert in AWS, Lambda, DynamoDB, TypeScript
   - Working directory: `server-serverless/`
   - 20+ years AWS experience

4. **üëÅÔ∏è Architect/Reviewer** (`@architect-reviewer`)
   - Code review, architecture, SDLC
   - Read-only access to all code
   - Write access to docs/ and team/ only
   - 20+ years mobile development experience

5. **üîß CI/CD Engineer** (`@cicd-engineer`)
   - GitHub Actions, mobile deployment
   - Working directory: `.github/` and `.gitignore`
   - 20+ years DevOps experience

## Documentation References

All agents should reference shared documentation in `team/`:
- `team/project-overview.md` - Architecture and project goals
- `team/api-contracts.md` - API specifications
- `team/coding-standards.md` - Coding conventions
- `team/release-process.md` - Release procedures
- `team/feature-roadmap.md` - Feature planning

## Tech Stack

### iOS
- Swift 5.9+, SwiftUI
- MVVM + Combine
- URLSession, async/await
- Keychain for secure storage

### Android
- Kotlin, Jetpack Compose
- MVVM + Clean Architecture
- Hilt for DI
- Retrofit + OkHttp

### Backend
- AWS Lambda (Node.js 18+, TypeScript)
- API Gateway (HTTP + WebSocket)
- DynamoDB
- DeepSeek/OpenAI for translation

### CI/CD
- GitHub Actions
- Fastlane (iOS)
- Gradle (Android)
- AWS SAM

## Branch Strategy

```
dev    ‚Üí Debug builds (simulators)
stage  ‚Üí Internal testing (TestFlight + Play Internal)
main   ‚Üí Production (App Store + Play Store)
```

## ‚õî CRITICAL CONFIGURATION - DO NOT TOUCH

The following files contain authentication configuration that **MUST NEVER BE MODIFIED**:

### iOS Authentication (Sign in with Apple)
- `ios-native/Intok.xcodeproj/project.pbxproj` ‚Üí `DEVELOPMENT_TEAM = LW7QG2H5ST`
- `ios-native/Intok.xcodeproj/project.pbxproj` ‚Üí `CODE_SIGN_ENTITLEMENTS = Intok/Intok.entitlements`
- `ios-native/Intok/Intok.entitlements` ‚Üí Do not remove any entitlements
- `ios-native/Intok/Core/Network/AppleAuthManager.swift` ‚Üí Core auth flow

### Android Authentication (Google Sign-In)
- `android-native/app/google-services.json` ‚Üí OAuth client IDs
- `android-native/app/src/main/java/com/intokapp/app/data/repository/AuthRepository.kt` ‚Üí Core auth flow

### Backend Authentication
- `server-serverless/src/handlers/auth.ts` ‚Üí OAuth endpoints

**See `team/authentication-config.md` for complete documentation.**

## Key Rules

1. **Always check deprecated folders** - Never modify server/, shared/, mobile/, or infrastructure/
2. **NEVER modify auth configuration** - See critical configuration section above
3. **Reference team docs** - Always check team/ folder for context
4. **Maintain parity** - iOS and Android features should stay in sync
5. **Update API contracts** - Any API changes must be documented
6. **Follow coding standards** - Consistency across the codebase

